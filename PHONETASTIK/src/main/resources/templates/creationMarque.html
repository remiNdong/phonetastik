<!DOCTYPE HTML>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">

<head>
	<th:block th:insert="fragments/default.html :: headerfiles"></th:block>
</head>

<body>

	<nav>
		<th:block th:insert="fragments/header.html :: header"></th:block>
	</nav>


	<div>
		<th:block th:insert="fragments/deconnexion.html :: administration">
	</div>


	<div class="container">
		<h2>Création de Marque</h2>


		<form action="#" method="post" th:action="@{'/administration/creationMarque'}" th:object="${marque}"
			onsubmit="return verifForm()">
			<div class="form-group">
				<label>Nom de la Marque</label>
				<input id="nom" type="text" th:field="*{nom}" th:errorclass="'is-invalid'" class="form-control" />
				<p th:if="${#fields.hasErrors('nom')}" th:errors="*{nom}" class="invalid-feedback">Incorrect</p>
				<div class="text-danger" id="erreurNom"></div>
			</div>

			<div class="form-group">
				<label>Image</label>
				<input type="file" id="imageMarque" name="imageMarque" accept=".jpg">
				<div class="text-danger" id="erreurImage"></div>
			</div>

			<input id="submit" type="submit" class="btn btn-primary" />
		</form>


		<div id="erreur"><span th:text="${erreurVue}"></span></div>

	</div>

	</br></br></br></br>




	<nav>
		<th:block th:insert="fragments/footer.html :: footer"></th:block>
	</nav>


	<div>
		<th:block th:insert="fragments/default.html :: scripts">
	</div>


	<script type="text/javascript">
		function verifForm() {
			$("#erreurNom").text("");
			$("#erreurImage").text("");


			var resultat = true;
			var nom = $("#nom").val();
			var imageMarque = $("#imageMarque").val();
			var numNom = nom.indexOf(" ");


			if (numNom != -1 || nom == "") {
				resultat = false;
				$("#erreurNom").text("Verifier que votre nom de Marque est rempli et qu'il ne comporte pas d'espace ");
			}


			var lastPoint = imageMarque.lastIndexOf(".") + 1;
			var extFile = imageMarque.substr(lastPoint, imageMarque.length).toLowerCase();
			if (extFile == "jpg") {
				//TO DO
			} else {
				resultat = false;
				$("#erreurImage").text("Seuls les fichiers jpg , jpeg et png sont acceptés ");
			}





			return resultat;
		}
	</script>





</body>

</html>